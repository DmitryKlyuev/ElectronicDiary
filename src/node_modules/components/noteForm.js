import React, {useEffect, useState} from "react";

const NoteForm = ({onSubmit, initialValues}) => {
    const [text, setText] = useState('');
    const [date, setDate] = useState('');

    useEffect(() => {
        const date = new Date().toLocaleDateString();
        setDate(date);
    },[]);

    const handleSubmit = event => {
        event.preventDefault();
        const note = {
            text,
            date
        };
        onSubmit(note);
    };

    useEffect(() => {
        if (!initialValues) {
            return
        }

        setText(initialValues.text)
    }, [initialValues]);

    return (
        <form onSubmit={handleSubmit}>
            <textarea className='form-control mb-3' type='text' rows='10' placeholder='Давай пиши'
                      value={text} onChange={e => setText(e.target.value)}/>
            <button type='submit' className='rounded common-button'>Сохранить</button>
        </form>
    )
};

export default NoteForm